from backend.app.db.session import SessionLocal
from backend.app.db.models import Jihate

JIHA_DATA = [
    # Format: (jiha_name, wilaya, capital_of_wilaya)
    ("جهة بني ملال خنيفرة", "إقليم أزيلال", "أزيلال"),
    ("جهة بني ملال خنيفرة", "إقليم بني ملال", "بني ملال"),
    ("جهة بني ملال خنيفرة", "إقليم الفقيه بن صالح", "الفقيه بن صالح"),
    ("جهة بني ملال خنيفرة", "إقليم خنيفرة", "خنيفرة"),
    ("جهة بني ملال خنيفرة", "إقليم خريبكة", "خريبكة"),
    
    ("جهة الدار البيضاء سطات", "إقليم بنسليمان", "بنسليمان"),
    ("جهة الدار البيضاء سطات", "إقليم برشيد", "برشيد"),
    ("جهة الدار البيضاء سطات", "عمالة الدار البيضاء", "الدار البيضاء"),
    ("جهة الدار البيضاء سطات", "إقليم الجديدة", "الجديدة"),
    ("جهة الدار البيضاء سطات", "إقليم مديونة", "مديونة"),
    ("جهة الدار البيضاء سطات", "عمالة المحمدية", "المحمدية"),
    ("جهة الدار البيضاء سطات", "إقليم النواصر", "النواصر"),
    ("جهة الدار البيضاء سطات", "إقليم سطات", "سطات"),
    ("جهة الدار البيضاء سطات", "إقليم سيدي بنور", "سيدي بنور"),
    
    ("جهة درعة تافيلالت", "إقليم الرشيدية", "الرشيدية"),
    ("جهة درعة تافيلالت", "إقليم ميدلت", "ميدلت"),
    ("جهة درعة تافيلالت", "إقليم ورزازات", "ورزازات"),
    ("جهة درعة تافيلالت", "إقليم تنغير", "تنغير"),
    ("جهة درعة تافيلالت", "إقليم زاكورة", "زاكورة"),
    
    ("جهة فاس مكناس", "إقليم بولمان", "بولمان"),
    ("جهة فاس مكناس", "إقليم الحاجب", "الحاجب"),
    ("جهة فاس مكناس", "عمالة فاس", "فاس"),
    ("جهة فاس مكناس", "إقليم إفران", "إفران"),
    ("جهة فاس مكناس", "عمالة مكناس", "مكناس"),
    ("جهة فاس مكناس", "إقليم مولاي يعقوب", "مولاي يعقوب"),
    ("جهة فاس مكناس", "إقليم صفرو", "صفرو"),
    ("جهة فاس مكناس", "إقليم تاونات", "تاونات"),
    ("جهة فاس مكناس", "إقليم تازة", "تازة"),
    
    ("جهة مراكش آسفي", "عمالة مراكش", "مراكش"),
    ("جهة مراكش آسفي", "إقليم الحوز", "تحناوت"),
    ("جهة مراكش آسفي", "إقليم شيشاوة", "شيشاوة"),
    ("جهة مراكش آسفي", "إقليم قلعة السراغنة", "قلعة السراغنة"),
    ("جهة مراكش آسفي", "إقليم الصويرة", "الصويرة"),
    ("جهة مراكش آسفي", "إقليم الرحامنة", "ابن جرير"),
    ("جهة مراكش آسفي", "إقليم آسفي", "آسفي"),
    ("جهة مراكش آسفي", "إقليم اليوسفية", "اليوسفية"),
    
    ("جهة الشرق", "عمالة وجدة أنكاد", "وجدة"),
    ("جهة الشرق", "إقليم بركان", "بركان"),
    ("جهة الشرق", "إقليم الدريوش", "الدريوش"),
    ("جهة الشرق", "إقليم فجيج", "فجيج"),
    ("جهة الشرق", "إقليم جرسيف", "جرسيف"),
    ("جهة الشرق", "إقليم جرادة", "جرادة"),
    ("جهة الشرق", "إقليم الناظور", "الناظور"),
    ("جهة الشرق", "إقليم تاوريرت", "تاوريرت"),
    
    ("جهة الرباط سلا القنيطرة", "عمالة الرباط", "الرباط"),
    ("جهة الرباط سلا القنيطرة", "عمالة سلا", "سلا"),
    ("جهة الرباط سلا القنيطرة", "عمالة القنيطرة", "القنيطرة"),
    ("جهة الرباط سلا القنيطرة", "إقليم الخميسات", "الخميسات"),
    ("جهة الرباط سلا القنيطرة", "إقليم سيدي قاسم", "سيدي قاسم"),
    ("جهة الرباط سلا القنيطرة", "إقليم سيدي سليمان", "سيدي سليمان"),
    ("جهة الرباط سلا القنيطرة", "عمالة الصخيرات تمارة", "تمارة"),
    
    ("جهة سوس ماسة", "أكادير", "أكادير"),
    ("جهة سوس ماسة", "إقليم اشتوكة أيت باها", "بيوڭرى"),
    ("جهة سوس ماسة", "عمالة إنزكان أيت ملول", "إنزكان"),
    ("جهة سوس ماسة", "إقليم تارودانت", "تارودانت"),
    ("جهة سوس ماسة", "إقليم طاطا", "طاطا"),
    ("جهة سوس ماسة", "إقليم تيزنيت", "تيزنيت"),
    
    ("جهة طنجة تطوان الحسيمة", "عمالة طنجة أصيلة", "طنجة"),
    ("جهة طنجة تطوان الحسيمة", "إقليم الحسيمة", "الحسيمة"),
    ("جهة طنجة تطوان الحسيمة", "إقليم شفشاون", "شفشاون"),
    ("جهة طنجة تطوان الحسيمة", "إقليم الفحص أنجرة", "أنجرة"),
    ("جهة طنجة تطوان الحسيمة", "إقليم العرائش", "العرائش"),
    ("جهة طنجة تطوان الحسيمة", "عمالة المضيق الفنيدق", "المضيق"),
    ("جهة طنجة تطوان الحسيمة", "إقليم وزان", "وزان"),
    ("جهة طنجة تطوان الحسيمة", "إقليم تطوان", "تطوان"),
    
    ("جهة الداخلة وادي الذهب", "إقليم وادي الذهب", "الداخلة"),
    ("جهة الداخلة وادي الذهب", "إقليم أوسرد", "أوسرد"),
    
    ("جهة كلميم واد نون", "إقليم كلميم", "كلميم"),
    ("جهة كلميم واد نون", "إقليم آسا الزاك", "آسا"),
    ("جهة كلميم واد نون", "إقليم سيدي إفني", "سيدي إفني"),
    ("جهة كلميم واد نون", "إقليم طانطان", "طانطان"),
    
    ("جهة العيون الساقية الحمراء", "إقليم العيون", "العيون"),
    ("جهة العيون الساقية الحمراء", "إقليم بوجدور", "بوجدور"),
    ("جهة العيون الساقية الحمراء", "إقليم السمارة", "السمارة"),
    ("جهة العيون الساقية الحمراء", "إقليم طرفاية", "طرفاية"),
]
def import_jihate():
    db = SessionLocal()
    try:
        # Add special entries
        special_entries = [
            (0, "مركزية", 0, "مركزية", "الرباط", 0),
            (100, "مكلف_مهمة", 100, "مكلف_مهمة", "الرباط", 0),
        ]
        for jiha_id, jiha, wilaya_id, wilaya, assima, assima_id in special_entries:
            db.add(Jihate(
                jiha_id=jiha_id,
                jiha=jiha,
                wilaya_id=wilaya_id,
                wilaya=wilaya,
                assima_jiha=assima,
                assima_jiha_id=assima_id
            ))

        # Add real jihate
        assima_counter = 1
        wilaya_counter = 1
        for jiha_name, wilaya, assima in JIHA_DATA:
            db.add(Jihate(
                jiha_id=JIHA_NAME_TO_ID[jiha_name],
                jiha=jiha_name,
                wilaya_id=wilaya_counter,
                wilaya=wilaya,
                assima_jiha=assima,
                assima_jiha_id=assima_counter
            ))
            assima_counter +=1
            wilaya_counter += 1

        db.commit()

        print(f"Imported jihate records")
    except Exception as e:
        print(f"❌ Error: {e}")
        db.rollback()
    finally:
        db.close()

# Jiha name to ID mapping
JIHA_NAME_TO_ID = {
    "جهة طنجة تطوان الحسيمة": 1,
    "جهة الشرق": 2,
    "جهة فاس مكناس": 3,
    "جهة الرباط سلا القنيطرة": 4,
    "جهة بني ملال خنيفرة": 5,
    "جهة الدار البيضاء سطات": 6,
    "جهة مراكش آسفي": 7,
    "جهة درعة تافيلالت": 8,
    "جهة سوس ماسة": 9,
    "جهة كلميم واد نون": 10,
    "جهة العيون الساقية الحمراء": 11,
    "جهة الداخلة وادي الذهب": 12,
}

if __name__ == "__main__":
    import_jihate()